# RHEL 10 Desktop Workstation Bootc Image
FROM registry.redhat.io/rhel10/rhel-bootc:latest

# Update system and install base packages
RUN dnf update -y && \
    dnf install -y \
    # Desktop Environment
    @workstation-product-environment \
    # Development tools
    gcc \
    gcc-c++ \
    make \
    cmake \
    git \
    vim \
    nano \
    # Container tools
    podman \
    buildah \
    skopeo \
    # System utilities
    procps-ng \
    tree \
    wget \
    curl \
    rsync \
    unzip \
    tar \
    # Media codecs (if available in repos)
    gstreamer1-plugins-base \
    gstreamer1-plugins-good \
    # Network tools
    NetworkManager-wifi \
    iw \
    # Hardware support
    mesa-dri-drivers \
    # Fonts
    liberation-fonts \
    # Python development
    python3 \
    python3-pip \
    python3-devel \
    # Security tools
    aide \
    audit \
    scap-security-guide \
    openscap-scanner \
    openscap \
    openscap-utils \
    && dnf clean all

# Create a STIG admin user (since root login will be disabled)
RUN useradd -m -G wheel ascensus && \
    mkdir -p /var/home/ascensus/.ssh && \
    chmod 700 /var/home/ascensus/.ssh && \
    chown ascensus:ascensus /var/home/ascensus/.ssh

# Set root password
RUN echo 'root:password' | chpasswd
